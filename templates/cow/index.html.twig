{% extends 'base.html.twig' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block body %}
<div class="container mt-4">

    <h1 class="mb-4">{{ title }}</h1>

    <a href="{{ path('cow_add') }}" class="btn btn-success mb-3">Adicionar Novo Animal</a>

    <table class="table table-striped table-bordered align-middle">
        <thead class="table-dark">
            <tr>
                <th>#</th>
                <th>Código</th>
                <th>Fazenda</th>
                <th>Leite / Semana (L)</th>
                <th>Alimento / Semana (Kg)</th>
                <th>Peso (Kg)</th>
                <th>Nascimento</th>
                <th>Vivo?</th>
                <th>Abatido?</th>
                <th>Data do Abate</th>
                <th>Criado em</th>
                <th>Atualizado em</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for cow in cows %}
                <tr>
                    <td>{{ cow.id }}</td>
                    <td>{{ cow.code }}</td>
                    <td>{{ cow.farm.name }}</td>

                    <td>{{ cow.milkperweek|number_format(2, ',', '.') }}</td>
                    <td>{{ cow.foodperweek|number_format(2, ',', '.') }}</td>
                    <td>{{ cow.weight|number_format(2, ',', '.') }}</td>

                    <td>{{ cow.birthdate|date('d/m/Y') }}</td>

                    <td>
                        {% if cow.isalive %}
                            <span class="badge bg-success">Sim</span>
                        {% else %}
                            <span class="badge bg-danger">Não</span>
                        {% endif %}
                    </td>

                    <td>
                        {% if cow.isslaughtered %}
                            <span class="badge bg-danger">Sim</span>
                        {% else %}
                            <span class="badge bg-success">Não</span>
                        {% endif %}
                    </td>

                    <td>
                        {% if cow.slaughterdate %}
                            {{ cow.slaughterdate|date('d/m/Y') }}
                        {% else %}
                            <span class="text-muted">—</span>
                        {% endif %}
                    </td>

                    <td>{{ cow.createdat|date('d/m/Y') }}</td>
                    <td>{{ cow.updatedat|date('d/m/Y') }}</td>

                    <td>
                        <a href="#" class="btn btn-primary btn-sm">Editar</a>
                        <a href="#" class="btn btn-danger btn-sm">Excluir</a>
                    </td>
                </tr>

            {% else %}
                <tr>
                    <td colspan="13" class="text-center text-muted py-3">
                        Nenhum animal cadastrado.
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
